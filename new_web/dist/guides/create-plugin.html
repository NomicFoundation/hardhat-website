<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Creating a plugin | Buidler</title>
    <meta name="description" content="The extensible Solidity developer tool">
    <meta  name="Cache-Control" content="public, max-age=0, must-revalidate"></meta >
    
    <link rel="preload" href="/assets/css/0.styles.09506b6f.css" as="style"><link rel="preload" href="/assets/js/app.9c0a7055.js" as="script"><link rel="preload" href="/assets/js/51.4da21d60.js" as="script"><link rel="prefetch" href="/assets/js/10.5f94f95c.js"><link rel="prefetch" href="/assets/js/11.869a0846.js"><link rel="prefetch" href="/assets/js/12.788d73fe.js"><link rel="prefetch" href="/assets/js/13.d04d6bcd.js"><link rel="prefetch" href="/assets/js/14.69bf948d.js"><link rel="prefetch" href="/assets/js/15.e293443f.js"><link rel="prefetch" href="/assets/js/16.e80bd1f1.js"><link rel="prefetch" href="/assets/js/17.3817feda.js"><link rel="prefetch" href="/assets/js/18.5a17e4f4.js"><link rel="prefetch" href="/assets/js/19.4f8a40ea.js"><link rel="prefetch" href="/assets/js/2.d8f505d4.js"><link rel="prefetch" href="/assets/js/20.1182c64a.js"><link rel="prefetch" href="/assets/js/21.304ff087.js"><link rel="prefetch" href="/assets/js/22.9edf3aa5.js"><link rel="prefetch" href="/assets/js/23.cd9beef9.js"><link rel="prefetch" href="/assets/js/24.664c3b20.js"><link rel="prefetch" href="/assets/js/25.1d02c147.js"><link rel="prefetch" href="/assets/js/26.30da964b.js"><link rel="prefetch" href="/assets/js/27.3441ee3e.js"><link rel="prefetch" href="/assets/js/28.4e8ccf6d.js"><link rel="prefetch" href="/assets/js/29.7d3061c8.js"><link rel="prefetch" href="/assets/js/3.ada95f33.js"><link rel="prefetch" href="/assets/js/30.62f80442.js"><link rel="prefetch" href="/assets/js/31.be959438.js"><link rel="prefetch" href="/assets/js/32.500ba9b0.js"><link rel="prefetch" href="/assets/js/33.99c71cd5.js"><link rel="prefetch" href="/assets/js/34.5b4ea5b7.js"><link rel="prefetch" href="/assets/js/35.d17a55aa.js"><link rel="prefetch" href="/assets/js/36.e8df3dd8.js"><link rel="prefetch" href="/assets/js/37.8272a67b.js"><link rel="prefetch" href="/assets/js/38.4879f20a.js"><link rel="prefetch" href="/assets/js/39.8713c990.js"><link rel="prefetch" href="/assets/js/4.349c46e4.js"><link rel="prefetch" href="/assets/js/40.b54cae15.js"><link rel="prefetch" href="/assets/js/41.aabb5fa2.js"><link rel="prefetch" href="/assets/js/42.8d1b6693.js"><link rel="prefetch" href="/assets/js/43.97fcef4e.js"><link rel="prefetch" href="/assets/js/44.8bf60653.js"><link rel="prefetch" href="/assets/js/45.f643643e.js"><link rel="prefetch" href="/assets/js/46.ccefbcd8.js"><link rel="prefetch" href="/assets/js/47.213ae446.js"><link rel="prefetch" href="/assets/js/48.8232e046.js"><link rel="prefetch" href="/assets/js/49.8ceae97e.js"><link rel="prefetch" href="/assets/js/5.6157dd80.js"><link rel="prefetch" href="/assets/js/50.1bee2d06.js"><link rel="prefetch" href="/assets/js/52.c236c809.js"><link rel="prefetch" href="/assets/js/53.b5a28dc3.js"><link rel="prefetch" href="/assets/js/54.a5938a44.js"><link rel="prefetch" href="/assets/js/55.71d8ffae.js"><link rel="prefetch" href="/assets/js/6.6508f2b1.js"><link rel="prefetch" href="/assets/js/7.6cc6b6c0.js"><link rel="prefetch" href="/assets/js/8.dea0db74.js"><link rel="prefetch" href="/assets/js/9.2efd6dc6.js">
    <link rel="stylesheet" href="/assets/css/0.styles.09506b6f.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><div><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/logo_dark.svg" alt="Buidler" class="logo"> <span class="site-name can-hide">Buidler</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" rel="noopener noreferrer" class="router-link-exact-active router-link-active nav-link">
  Home
  </a></div><div class="nav-item"><a href="/plugins/" rel="noopener noreferrer" class="nav-link">
  Plugins
  </a></div><div class="nav-item"><a href="/guides/#getting-started" rel="noopener noreferrer" class="nav-link">
  Guides
  </a></div><div class="nav-item"><a href="/documentation/" rel="noopener noreferrer" class="nav-link">
  Documentation
  </a></div><div class="nav-item"><a href="/api/" rel="noopener noreferrer" class="nav-link">
  API
  </a></div><div class="nav-item"><a href="https://nomiclabs.io" target="_blank" rel="noopener noreferrer" class="nav-link">
  Nomic Labs
  </a></div> <a href="https://github.com/nomiclabs/buidler" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    </a></nav></div></header> <div class="dark"><h1>Turn a mess of tricky Solidity tools into a smooth workflow</h1> <p>Unlock your productivity through flexibility, interoperability, and standardization.</p></div></div> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" rel="noopener noreferrer" class="router-link-exact-active router-link-active nav-link">
  Home
  </a></div><div class="nav-item"><a href="/plugins/" rel="noopener noreferrer" class="nav-link">
  Plugins
  </a></div><div class="nav-item"><a href="/guides/#getting-started" rel="noopener noreferrer" class="nav-link">
  Guides
  </a></div><div class="nav-item"><a href="/documentation/" rel="noopener noreferrer" class="nav-link">
  Documentation
  </a></div><div class="nav-item"><a href="/api/" rel="noopener noreferrer" class="nav-link">
  API
  </a></div><div class="nav-item"><a href="https://nomiclabs.io" target="_blank" rel="noopener noreferrer" class="nav-link">
  Nomic Labs
  </a></div> <a href="https://github.com/nomiclabs/buidler" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    </a></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading open"><span>Guides</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/guides/" class="sidebar-link">Getting started</a></li><li><a href="/guides/create-task.html" class="sidebar-link">Creating a task</a></li><li><a href="/guides/create-plugin.html" class="active sidebar-link">Creating a plugin</a></li><li><a href="/guides/truffle-migration.html" class="sidebar-link">Migrating from Truffle</a></li></ul></div></li></ul> </div> <div class="page"> <div class="content"><h1 id="creating-a-plugin"><a href="#creating-a-plugin" aria-hidden="true" class="header-anchor">#</a> Creating a plugin</h1> <p>In this guide, we will explore the creation of plugins for Buidler, which are the key component for integrating other tools.</p> <p>Because of the way some Ethereum tools and libraries are designed, it’s not easy or even possible to get them to work together. Through its flexible design Buidler allows most tools to play along through short and simple plugins.</p> <p>What exactly are plugins in Buidler?</p> <p>Plugins in Buidler are essentially reusable bits of configuration, which are defined programmatically using a DSL. When developing a plugin the main tools available to integrate new functionality are extending the <a href="https://github.com/nomiclabs/buidler#Buidler-Runtime-Environment" target="_blank" rel="noopener noreferrer">Buidler Runtime Environment<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>, extending the Buidler config, defining new tasks and overriding existing ones, which are all configuration actions achieved through code.</p> <p>Some examples of things you could achieve by creating a plugin are running a linter when the <code>check</code> task runs, injecting an instance of the Ethereum library of your liking to the Buidler Runtime Environment, or adding a task to run a code coverage tool.</p> <p>Let’s go through the process of creating a plugin to inject ethers.js to the Buidler Runtime Environment.</p> <p>The environment is configured through a queue of extension functions that you can add to using the <code>extendEnvironment()</code> function. It receives one parameter which is an async function which will be executed after the required initialization is done, in order.</p> <p>For example, adding the following to <code>buidler.config.js</code>:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">extendEnvironment</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">env</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  env<span class="token punctuation">.</span>hi <span class="token operator">=</span> <span class="token string">&quot;hello, buidler&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><p>Will make <code>hi</code> available everywhere where the environment is accessible.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">extendEnvironment</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">env</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  env<span class="token punctuation">.</span>hi <span class="token operator">=</span> <span class="token string">&quot;hello, buidler&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">task</span><span class="token punctuation">(</span><span class="token string">&quot;envtest&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">args<span class="token punctuation">,</span> env</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>env<span class="token punctuation">.</span>hi<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>Will yield:</p> <p><img src="https://cdn-images-1.medium.com/max/1600/1*RnZoV1rwlK8j-TD2gGz8VQ.png" alt></p> <p>This is literally all it takes to put together a plugin for Buidler. Injecting an ethers.js instance into the environment would look like this:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">extendEnvironment</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">env</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> wrapper <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">EthersProviderWrapper</span><span class="token punctuation">(</span>env<span class="token punctuation">.</span>ethereum<span class="token punctuation">)</span><span class="token punctuation">;</span>

  env<span class="token punctuation">.</span>ethers <span class="token operator">=</span> <span class="token punctuation">{</span>
    provider<span class="token punctuation">:</span> wrapper<span class="token punctuation">,</span>
    
    <span class="token function-variable function">getContract</span><span class="token punctuation">:</span> <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> artifact <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">readArtifact</span><span class="token punctuation">(</span>env<span class="token punctuation">.</span>config<span class="token punctuation">.</span>paths<span class="token punctuation">.</span>artifacts<span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">const</span> bytecode <span class="token operator">=</span> artifact<span class="token punctuation">.</span>bytecode<span class="token punctuation">;</span>
      <span class="token keyword">const</span> signers <span class="token operator">=</span> <span class="token keyword">await</span> env<span class="token punctuation">.</span>ethers<span class="token punctuation">.</span><span class="token function">signers</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">ethers<span class="token punctuation">.</span>ContractFactory</span><span class="token punctuation">(</span>artifact<span class="token punctuation">.</span>abi<span class="token punctuation">,</span> bytecode<span class="token punctuation">,</span> signers<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>

    <span class="token function-variable function">signers</span><span class="token punctuation">:</span> <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> accounts <span class="token operator">=</span> <span class="token keyword">await</span> env<span class="token punctuation">.</span>ethereum<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&quot;eth_accounts&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token keyword">return</span> accounts<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">account</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> wrapper<span class="token punctuation">.</span><span class="token function">getSigner</span><span class="token punctuation">(</span>account<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>Full functional code at <a href="https://gist.github.com/fzeoli/9cdd9c1182b9636829bf71bfacb82c43" target="_blank" rel="noopener noreferrer">here<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <p>And that’s it. Ethers.js is now fully available to be used in the Buidler console, your tasks, tests and other plugins.</p> <p>Now, this is just injecting from the config file, which by itself can be useful if that’s all you care about, but this can also be packaged as a reusable plugin that you can publish for others to benefit as well.</p> <p>You can use the <a href="https://github.com/nomiclabs/buidler-ts-plugin-boilerplate" target="_blank" rel="noopener noreferrer">plugin boilerplate repository<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> as a starting point to create an npm package for your plugin. We highly recommend using TypeScript for your plugins, especially if you’re looking to inject objects into the Buidler Runtime Environment. This way, types can be exported and text editors can autocomplete for your users.</p> <p>For a fully functional ethers plugin written in TypeScript take a look at <a href="https://github.com/nomiclabs/buidler-ethers" target="_blank" rel="noopener noreferrer">nomiclabs/buidler-ethers<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> on Github.</p> <p>If you end up publishing a plugin, send us a pull request and we’ll add it to the <a href="https://github.com/nomiclabs/buidler" target="_blank" rel="noopener noreferrer">Buidler README file<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <p>For any questions or feedback you may have, you can find us in the <a href="http://t.me/BuidlerSupport" target="_blank" rel="noopener noreferrer">Buidler Support Telegram group<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p></div> <div class="page-edit"><div class="edit-link"><a href="https://github.com/nomiclabs/buidler/edit/master/docs/guides/create-plugin.md" target="_blank" rel="noopener noreferrer">Help us improve this page!</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">4/12/2019, 2:58:25 PM</span></div></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/guides/create-task.html" class="prev">
          Creating a task
        </a></span> <span class="next"><a href="/guides/truffle-migration.html">
          Migrating from Truffle
        </a>
        →
      </span></p></div> </div> <!----></div></div>
    <script src="/assets/js/app.9c0a7055.js" defer></script><script src="/assets/js/51.4da21d60.js" defer></script>
  </body>
</html>
